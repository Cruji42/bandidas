<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Burger</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- <link rel="manifest" href="site.webmanifest"> -->
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.png">
    <!-- Place favicon.ico in the root directory -->

    <!-- CSS here -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/themify-icons.css">
    <link rel="stylesheet" href="css/nice-select.css">
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/slicknav.css">
    <link rel="stylesheet" href="css/style.css">
    <!-- <link rel="stylesheet" href="css/responsive.css"> -->
</head>

<body>
    <!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->

    <!-- header-start -->
    <header>
        <div class="header-area ">
            <div id="sticky-header" class="main-header-area">
                <div class="container-fluid p-0">
                    <div class="row align-items-center no-gutters">
                        <div class="col-xl-5 col-lg-5">
                            <div class="main-menu  d-none d-lg-block">
                                <nav>
                                    <ul id="navigation">
                                        <li><a  href="index.html">home</a></li>
                                        <li><a class="active" href="Menu.html">Menu</a></li>
                                        <li><a href="about.html">Conócenos</a></li>
                                        <!-- <li><a href="#">blog <i class="ti-angle-down"></i></a>
                                            <ul class="submenu">
                                                <li><a href="blog.html">blog</a></li>
                                                <li><a href="single-blog.html">single-blog</a></li>
                                            </ul>
                                        </li> -->
                                        <!-- <li><a href="contact.html">Contact</a></li> -->
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <div class="col-xl-2 col-lg-2">
                            <div class="logo-img">
                                <a href="index.html">
                                    <img width="150px" src="img/logo.png" alt="">
                                </a>
                            </div>
                        </div>
                        <div class="col-xl-5 col-lg-5 d-none d-lg-block">
                            <div class="row book_room">
                                

                                <div class="socail_links col-3 offset-2">
                                    <ul>
                                        <li>
                                            <a href="#">
                                                <i class="fa fa-instagram"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <i class="fa fa-facebook"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>

                                <div class="dropdown  col-6" id="log_button" >
                                   
                                </div>
                                    <!-- <div class="book_btn  d-xl-block" id="log_button">
                                       
                                    </div> -->

                            </div>
                        </div>
                        <div class="col-12">
                            <div class="mobile_menu d-block d-lg-none"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- header-end -->

    <!-- bradcam_area_start -->
    <div class="bradcam_area breadcam_bg overlay">
        <h3>Menu</h3>
    </div>
    <!-- bradcam_area_end -->

    <!-- best_burgers_area_start  -->
    <div class="best_burgers_area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section_title text-center mb-80">
                        <span>Snacks Menu</span>
                        <h3>LOS MEJORES SNACKS</h3>
                    </div>
                </div>
            </div>
            <div class="row" id="product_Menu">
               
            </div>
        </div>
    </div>
    <!-- best_burgers_area_end  -->

    <!-- features_room_startt -->
    <div class="Burger_President_area">
            <div class="Burger_President_here">
                <div class="single_Burger_President">
                    <div class="room_thumb">
                        <img src="https://www.tasteandtellblog.com/wp-content/uploads/2020/09/Corn-Dog-Recipe-1.jpg" alt="">
                        <div class="room_heading d-flex justify-content-between align-items-center">
                            <div class="room_heading_inner">
                                <span>$15</span>
                                <h3>Banderilla Clásica</h3>
                                <p>Banderilla con cubierta simple y aderezo <br> de tu preferencia.</p>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="single_Burger_President">
                    <div class="room_thumb">
                        <img src= "https://dam.cocinafacil.com.mx/wp-content/uploads/2021/07/como-se-preparan-los-dorilocos.jpg" alt="">
                        <div class="room_heading d-flex justify-content-between align-items-center">
                            <div class="room_heading_inner">
                                <span>$28</span>
                                <h3>Dorilocotes</h3>
                                <p>Doritos al gusto, repollo, jitomate, cueritos, piña, zanahoria, jicama, <br> pepino y churros de masa.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <!-- features_room_end -->

   <!-- testimonial_area_start  -->
   <div class="testimonial_area ">
    <div class="container">
        <div class="row">
            <div class="col-xl-12">
                    <div class="section_title mb-60 text-center">
                        <span>Experiencias</span>
                        <h3>Clientes Satisfechos</h3>
                    </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xl-12">
                <div class="testmonial_active owl-carousel">
                    <div class="single_carousel">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="single_testmonial text-center">
                                    <p>Excelente servicio, la preparación de los productos se hace con ingredientes frescos
                                        y ademas tienen de mi salsa favorita.
                                    </p>
                                    <div class="testmonial_author">
                                        <div class="thumb">
                                            <img src="img/testmonial/1.png" alt="">
                                        </div>
                                        <h4>Kristiana Chouhan</h4>
                                        <div class="stars">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star-half"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="single_carousel">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="single_testmonial text-center">
                                    <p>Las salchipapas y los doriesquites son lo mejor, sin duda mis snacks favoritos</p>
                                    <div class="testmonial_author">
                                        <div class="thumb">
                                            <img src="img/testmonial/2.png" alt="">
                                        </div>
                                        <h4>Arafath Hossain</h4>
                                        <div class="stars">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star-half"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="single_carousel">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="single_testmonial text-center">
                                    <p>Después de un largo día de trabajo, nada como disfrutar de unos ricos
                                        dorilocos de #LasBandidas </p>
                                    <div class="testmonial_author">
                                        <div class="thumb">
                                            <img src="img/testmonial/3.png" alt="">
                                        </div>
                                        <h4>A.H Shemanto</h4>
                                        <div class="stars">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star-half"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- testimonial_area_ned  -->


    <!-- instragram_area_start -->
    <div class="instragram_area">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-6">
                <div class="single_instagram">
                    <img src="img/instragram/1.png" alt="">
                    <div class="ovrelay">
                        <a href="#">
                            <i class="fa fa-instagram"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="single_instagram">
                    <img src="img/instragram/2.png" alt="">
                    <div class="ovrelay">
                        <a href="#">
                            <i class="fa fa-instagram"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="single_instagram">
                    <img src="img/instragram/3.png" alt="">
                    <div class="ovrelay">
                        <a href="#">
                            <i class="fa fa-instagram"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="single_instagram">
                    <img src="img/instragram/4.png" alt="">
                    <div class="ovrelay">
                        <a href="#">
                            <i class="fa fa-instagram"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <!-- instragram_area_end -->


     <!-- Modal html -->

     <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">ORDENAR</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form>
                <div class="form-group">
                  <label for="recipient-name" class="col-form-label">Cantidad</label>
                  <input type="number" min="1"  pattern="^[1-9]+" class="form-control" value="1" id="amount">
                </div>
                <div class="form-group">
                  <label for="message-text" class="col-form-label">Comentarios</label>
                  <textarea class="form-control" placeholder="Sin salsa..." id="comments"></textarea>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-danger btn-small" data-dismiss="modal" onclick="clearModal()">Cancelar</button>
              <button type="button" class="btn text-white btn-warning btn-small" data-dismiss="modal"  onclick="addToOrder()">Agregar al carrito</button>
            </div>
          </div>
        </div>
      </div>

    <!--Modal html end-->

    <!--Modal carrito de compras start-->

    <div class="modal fade " id="modalShoppingCar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modalShoppingCar" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Carrito de compras</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <table class="table">
                     <thead>
                         <tr>
                             <th scope="col"> </th>
                            <th scope="col">Producto</th>
                            <th scope="col">Cantidad</th>
                            <th scope="col">Observaciones</th>
                            <th scope="col">Precio unitario</th>
                            <th scope="col">Subtotal</th>
                        </tr>
                     </thead>
                     <tbody id="shoppingCarContent">
                     </tbody>
                </table>
                <hr>
                <div class="row">
                    <div class="offset-8 col-2">
                        <b>TOTAL</b>
                    </div>
                    <div id="total" class="col-2">
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
              <button type="button" class="btn btn-danger btn-small" data-dismiss="modal" onclick="clearModal()">Cancelar</button>
              <button type="button" class="btn text-white btn-warning btn-small" onclick="sendOrder()" data-dismiss="modal" >Hacer la Orden</button>
            </div>
          </div>
        </div>
      </div>

    <!--MOdal carrito de compras end-->


    <!-- footer_start  -->
    <footer class="footer">
        <div class="footer_top">
            <div class="container">
                <div class="row">
                    <div class="col-xl-4 col-md-6 col-lg-4">
                        <div class="footer_widget text-center ">
                            <h3 class="footer_title pos_margin">
                                    San Miguel
                            </h3>
                            <p>5th flora, 700/D kings road, <br> 
                                    green lane New York-1782 <br>
                                    <a href="#">info@burger.com</a></p>
                            <a class="number" href="#">+10 378 483 6782</a>

                        </div>
                    </div>
                    <div class="col-xl-4 col-md-6 col-lg-4">
                        <div class="footer_widget text-center ">
                            <h3 class="footer_title pos_margin">
                                Dolores Hidalgo
                            </h3>
                            <p>5th flora, 700/D kings road, <br> 
                                    green lane New York-1782 <br>
                                    <a href="#">info@burger.com</a></p>
                            <a class="number" href="#">+10 378 483 6782</a>

                        </div>
                    </div>
                    <div class="col-xl-4 col-md-12 col-lg-4">
                            <div class="footer_widget">
                                    <h3 class="footer_title">
                                            Recibe Promociones
                                    </h3>
                                    <form action="#" class="newsletter_form">
                                        <input type="text" placeholder="Enter your mail">
                                        <button type="submit">¡Registrate!</button>
                                    </form>
                                    <p class="newsletter_text">¡Registrate para recibir increibles descuentos!</p>
                                </div>
                    </div>
                </div>
                <div class="row justify-content-center">
                    <div class="col-lg-4">
                        <div class="socail_links text-center">
                                <ul>
                                    <li>
                                        <a href="#">
                                            <i class="ti-instagram"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <i class="ti-facebook"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- footer_end  -->

    <!-- JS here -->
    <script src="js/vendor/modernizr-3.5.0.min.js"></script>
    <script src="js/vendor/jquery-1.12.4.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/isotope.pkgd.min.js"></script>
    <script src="js/ajax-form.js"></script>
    <script src="js/waypoints.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <script src="js/imagesloaded.pkgd.min.js"></script>
    <script src="js/scrollIt.js"></script>
    <script src="js/jquery.scrollUp.min.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/nice-select.min.js"></script>
    <script src="js/jquery.slicknav.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/plugins.js"></script>

    <!--contact js-->
    <script src="js/contact.js"></script>
    <script src="js/jquery.ajaxchimp.min.js"></script>
    <script src="js/jquery.form.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/mail-script.js"></script>

    <script src="js/main.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
<script>
    var token = localStorage.getItem('token');
    console.log(token);

    function clearStorage(){
        localStorage.clear();
    }
    
    function parseJwt (token) {
        var base64Url = token.split('.')[1];
        var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                         }).join(''));

        return JSON.parse(jsonPayload);
    }

    var div_log = document.getElementById("log_button")
    var content;

  


    
    var html_Menu = "";
        var div_product_Menu = document.getElementById("product_Menu");
        $.ajax({
                type: "GET",
                url: "https://bandidas.herokuapp.com/index.php/PRODUCT",
                success: function (result, status) {
                            console.log(result);
                            result.forEach(element => {
                                if(token) {
                                    html_Menu = html_Menu + '<div class=" col-md-6 col-lg-6"><div class="single_delicious d-flex align-items-center"><div class="thumb"><img src="'+ element.image +'" width="250px" height="165px" alt=""></div><div class="info"><h3>'+ element.name +'</h3><p>'+ element.description +'</p><div class="row"> <span class="col-2">$'+ element.price +'</span> <a href="#" onclick="return getData( '+ element.id +', \' '+ element.name +' \', \' '+ element.price +' \')" data-toggle="modal" data-target="#exampleModal" class="boxed-btn3 col-7 offset-1">Ordenar ahora</a></div></div></div></div>'
                                } else if( token === null || token === undefined){
                                    html_Menu = html_Menu + '<div class=" col-md-6 col-lg-6"><div class="single_delicious d-flex align-items-center"><div class="thumb"><img src="'+ element.image +'" width="250px" height="165px" alt=""></div><div class="info"><h3>'+ element.name +'</h3><p>'+ element.description +'</p><div class="row"> <span class="col-2">$'+ element.price +'</span></div></div></div></div>'
                                }
                            });
                            console.log("/////////////////////");
                            console.log(html_Menu);
                            div_product_Menu.insertAdjacentHTML('afterbegin',html_Menu);
                         },
                error: function (error, status) {
                            console.log(error);
                        }
            })

        var id_product;
        var data_order = [];

        function getId(id){
            id_product = id;
        }

        var id_product;
        var product_name;
        var data_order = [];

        function getData(id,name, price){
            id_product = id;
            product_name = name;
            product_price = price
        }

        function addToOrder(){
            let array_order = {
                product_id : id_product,
                name: product_name,
                price: product_price,
                amount: document.getElementById('amount').value,
                comments: document.getElementById('comments').value
            }

            data_order.push(array_order);
            car_data = localStorage.getItem('shopping_car_'+id_user);
            if( car_data === null || car_data === undefined){
                localStorage.setItem('shopping_car_'+id_user, JSON.stringify(data_order));
            } else {
                let data_car = JSON.parse(car_data);
                data_car.push(array_order);
                localStorage.setItem('shopping_car_'+id_user, JSON.stringify(data_car));
            }
            
            clearModal();

        }

        function clearModal(){
            document.getElementById('amount').value = 1;
            document.getElementById('comments').value = "";
        }

        var div_log = document.getElementById("log_button")
        var div_nav = document.getElementById("navigation")
        var content;
        var contentmovile;

        if(token){
            let data_user = parseJwt(token);
            id_user = data_user.data.id;
            content = ' <a type="button" class="btn btn-primary dropdown-toggle btn-user-menu  "  data-toggle="dropdown">' + data_user.data.name + '</a><div class="dropdown-menu div-user-menu"><button class="dropdown-item " data-toggle="modal" onclick="showDataShoppingCar()" data-target="#modalShoppingCar" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart-fill" viewBox="0 0 16 16"><path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></svg>  Carrito</button><button onclick=" location.href=\'./blog.html \'" class="dropdown-item" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-ticket-detailed-fill" viewBox="0 0 16 16"><path d="M0 4.5A1.5 1.5 0 0 1 1.5 3h13A1.5 1.5 0 0 1 16 4.5V6a.5.5 0 0 1-.5.5 1.5 1.5 0 0 0 0 3 .5.5 0 0 1 .5.5v1.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 11.5V10a.5.5 0 0 1 .5-.5 1.5 1.5 0 1 0 0-3A.5.5 0 0 1 0 6V4.5Zm4 1a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5Zm0 5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5ZM4 8a1 1 0 0 0 1 1h6a1 1 0 1 0 0-2H5a1 1 0 0 0-1 1Z"/></svg>  Ordenes</button><hr class="div-user-menu-hr"><button onclick="logout()" class="dropdown-item" style="vertical-align: middle;" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/><path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/></svg>  Cerrar sesión</button></div>'
            contentmovile ='<hr class="d-lg-none d-md-none"><li class="d-lg-none d-md-none"><a data-toggle="modal" onclick="return showDataShoppingCar()" data-target="#modalShoppingCar" href="">Carrito</a></li><li class="d-lg-none d-md-none"><a href="./blog.html">Ordenes</a></li><hr class="d-lg-none d-md-none"><li class="d-lg-none d-md-none"><a onclick=" return logout()">Cerrar Sesión</a></li>'
        } else if(token === null || token === undefined) {
            content = '<a type="button" class="btn btn-primary  btn-user-menu" href="./login.html">Inicia sesión</a>';
            contentmovile = '<hr class="d-lg-none d-md-none"><li class="d-lg-none d-md-none"><a href="./login.html">Inicia Sesión</a></li>'
        }
        
        div_log.insertAdjacentHTML('afterbegin', content);
        div_nav.insertAdjacentHTML('beforeend', contentmovile);
    var html_shoppingCard;
        var tboddy_shopping_card = document.getElementById('shoppingCarContent');
        var total_shoppingCard;
        var  html_total_shoppingCard;
        var  div_total_shoppingCard = document.getElementById("total");

        function showDataShoppingCar(){
            html_shoppingCard = ""; 
            html_total_shoppingCard = "";
            total_shoppingCard = 0;
            let data = JSON.parse(localStorage.getItem('shopping_car_'+id_user));
             $("#shoppingCarContent tr").remove();
             $("#total p").remove();
             console.log(data);
                 data.forEach( element => {
                 let subtotal = parseInt(element.amount) * parseInt(element.price);
                 total_shoppingCard = total_shoppingCard + subtotal;
                 
                  html_shoppingCard = html_shoppingCard + '<tr><th><button type="button" class="deleteButton" onclick="deleteProduct('+ element.product_id +')"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/></svg></button></th><th scope="row">'+ element.name +'</th><td>'+element.amount +'</td><td>' + element.comments +'</td><td>$ '+element.price+'</td><td>$ '+subtotal+'</td></tr>'
              } )
           
             html_total_shoppingCard = "<p> $ "+ total_shoppingCard +"</p>";
             div_total_shoppingCard.insertAdjacentHTML('afterbegin', html_total_shoppingCard);
             tboddy_shopping_card.insertAdjacentHTML('afterbegin', html_shoppingCard);
            
        }

        function sendOrder(){
            console.log(id_user);
            array_insert_order = {
                user_id: id_user,
                order: JSON.parse(localStorage.getItem('shopping_car_'+id_user))
            }

            console.log(array_insert_order);

            $.ajax({
                type: "POST",
                url: "https://bandidas.herokuapp.com/index.php/ORDER",
                data: JSON.stringify(array_insert_order),
                contentType: "application/json",
                success: function (result, status) {
                            console.log(result);
                             if( result.body === 'success'){
                                 localStorage.removeItem("shopping_car_"+id_user);
                                 Swal.fire({
                                     title: 'Orden realizada',
                                    text: 'Tu orden ha sido realizada con exito',
                                    icon: 'success',
                                    confirmButtonText: 'Aceptar',
                                    confirmButtonColor: '#F2C64D'
                                })
                             } else {
                                Swal.fire({
                                title: 'Error',
                                icon: 'error',
                                text: 'Lo sentimos, no pudimos procesar tu orden, intentalo más tarde',
                                confirmButtonText: 'Aceptar',
                                confirmButtonColor: '#F2C64D'
                                }) 
                             }
                         },
                error: function (error, status) {
                            console.log(error);
                        }
            })
        }

        function deleteProduct(id){

            html_shoppingCard = ""; 
            html_total_shoppingCard = "";
            total_shoppingCard = 0;
            Swal.fire({
                title: 'Eliminar producto',
                text: '¡Realmente deseas eliminar este producto de tu carrito de compras?',
                icon: 'warning',
                confirmButtonText: 'Aceptar',
                confirmButtonColor: '#F2C64D',
                showCancelButton: true,
                cancelButtonText: 'Cancelar',
                cancelButtonColor: '#D73141'
            }).then((res) => {
                if(res.isConfirmed){
                    let data = JSON.parse(localStorage.getItem('shopping_car_'+id_user));
                    data.forEach( (element, index) => {
                        if( parseInt(element.product_id) === id){
                            data.splice(index,1);
                        }
                    })            
                    $("#shoppingCarContent tr").remove();
                    $("#total p").remove();

                    data.forEach( element => {
                        let subtotal = parseInt(element.amount) * parseInt(element.price);
                        total_shoppingCard = total_shoppingCard + subtotal;
                        html_shoppingCard = html_shoppingCard + '<tr><th><button type="button" class="deleteButton" onclick="deleteProduct('+ element.product_id +')"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/></svg></button></th><th scope="row">'+ element.name +'</th><td>'+element.amount +'</td><td>' + element.comments +'</td><td>$ '+element.price+'</td><td>$ '+subtotal+'</td></tr>'
                    } )
           
                    html_total_shoppingCard = "<p> $ "+ total_shoppingCard +"</p>";
                    div_total_shoppingCard.insertAdjacentHTML('afterbegin', html_total_shoppingCard);
                    tboddy_shopping_card.insertAdjacentHTML('afterbegin', html_shoppingCard);  
                    localStorage.setItem('shopping_car_'+id_user, JSON.stringify(data));                 
                }
            } )
           
        }
        function logout(){
            localStorage.removeItem("token");
            location.href="./login.html";
        }

</script>
</html>